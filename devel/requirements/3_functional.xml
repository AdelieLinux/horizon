<?xml version="1.0" encoding="utf-8"?>
<chapter label="3" id="functional">
    <title>Functional System Requirements</title>
    <section id="ui">
        <title>Horizon UI</title>
        <para>The Horizon UI is the wizard-style user interface component of Project Horizon.  The system takes the input of the user and creates a HorizonScript.  The resultant HorizonScript is either executed on the running system when started in an installation environment, or saved for later use when started in a runtime environment.</para>
        <section id="ui_early">
            <title>System Initialisation</title>
            <section id="ui_early_meta">
                <title>Description / Priority</title>
                <para>This section describes the boot-up and initialisation procedures for the Horizon UI Installation Environment.</para>
            </section>
            <section id="ui_early_req">
                <title>Functional Requirements</title>
                <formalpara id="UI.Early.LoadFirmware">
                    <title>UI.Early.LoadFirmware</title>
                    <para>If the user has specified to load firmware in the installation environment, the system shall install the linux-firmware package to the installation environment before eudev is started.</para>
                </formalpara>
                <formalpara id="UI.Early.DetectGfx">
                    <title>UI.Early.DetectGfx</title>
                    <para>The system shall detect all usable graphics adaptors present in the computer.</para>
                </formalpara>
                <formalpara id="UI.Early.NoGfx">
                    <title>UI.Early.NoGfx</title>
                    <para>If there are no usable graphics adaptors present, the system shall display a message that installation cannot continue, and allow the user to login to a virtual TTY or reboot the computer.</para>
                </formalpara>
                <formalpara id="UI.Early.MultiGfx">
                    <title>UI.Early.MultiGfx</title>
                    <para>If multiple graphics adaptors are present, the system shall attempt to determine which graphics adaptor has a monitor attached.  If the determiniation is that multiple graphics adaptors have monitors attached, or it is indeterminiate which adaptor has a monitor attached, then the system shall prompt the user to choose which graphics adaptor to use for installation.</para>
                </formalpara>
            </section>
        </section>
        <section id="ui_language">
            <title>User Language Selection</title>
            <section id="ui_language_meta">
                <title>Description / Priority</title>
                <para>A User must determine what natural language they are most comfortable with using for installing Adélie Linux.  The system will allow the User to select their preferred natural language from a list of the languages to which the system has been translated.  Priority: Medium.</para>
            </section>
            <section id="ui_language_pre">
                <title>Prerequisites</title>
                <formalpara id="UI.Language.Prerequisites">
                    <title>UI.Language.Prerequisites</title>
                    <para>The system must have more than one language translation available for use.</para>
                </formalpara>
            </section>
            <section id="ui_language_req">
                <title>Functional Requirements</title>
                <formalpara id="UI.Language.List">
                    <title>UI.Language.List</title>
                    <para>The system shall present the User with a list of natural languages, in the form of: "Install Adélie using English", "Installer Adélie en français".</para>
                </formalpara>
                <formalpara id="UI.Language.Button">
                    <title>UI.Language.Button</title>
                    <para>For this screen only, the system shall present the "Next" button as a single right-facing arrow.  The system shall not present the Cancel button on this screen.</para>
                </formalpara>
                <formalpara id="UI.Language.Enable">
                    <title>UI.Language.Enable</title>
                    <para>When the User chooses a language from the list, the system shall enable the Next button to be clicked.</para>
                </formalpara>
            </section>
            <section id="ui_language_key">
                <title>HorizonScript Keys</title>
                <formalpara id="Script.Key.language">
                    <title>Script.Key.language</title>
                    <para><varname>language</varname> &mdash; The locale identifier of the chosen language.</para>
                </formalpara>
            </section>
        </section>
        <section id="ui_introduction">
            <title>Initial Introduction</title>
            <section id="ui_introduction_meta">
                <title>Description / Priority</title>
                <para>The system will explain to the User an overview of the installation process, and introduce common UI elements.  A User may choose to run a tool or proceed with the installation.</para>
            </section>
            <section id="ui_introduction_req">
                <title>Functional Requirements</title>
                <formalpara id="UI.Intro.Describe">
                    <title>UI.Intro.Describe</title>
                    <para>The system shall present the User with a greeting message including a high-level overview of the installation process.  The system shall reassure the user that the installation process will not modify any data until the final step.</para>
                </formalpara>
                <formalpara id="UI.Intro.Elements">
                    <title>UI.Intro.Elements</title>
                    <para>The system shall describe the UI elements common to each screen, including the Help button, the Back/Next buttons, and the Cancel button.</para>
                </formalpara>
                <formalpara id="UI.Intro.Tools">
                    <title>UI.Intro.Tools</title>
                    <para>The system shall allow the User to start a tool from the following list before beginning the installation.
                        <orderedlist id="UIT">
                            <listitem id="UIT-1"><para>A terminal.</para></listitem>
                            <listitem id="UIT-2"><para>An external partition editor.</para></listitem>
                            <listitem id="UIT-3"><para>A lightweight Web browser.</para></listitem>
                        </orderedlist>
                    </para>
                </formalpara>
            </section>
        </section>
        <section id="ui_input">
            <title>Input Device Configuration</title>
            <section id="ui_input_meta">
                <title>Description / Priority</title>
                <para>A User may have a keyboard that is not the Linux default of US QWERTY.  As such, a User must be able to choose a keyboard layout that matches their hardware.</para>
            </section>
            <section id="ui_input_req">
                <title>Functional Requirements</title>
                <formalpara id="UI.Input.LayoutList">
                    <title>UI.Input.LayoutList</title>
                    <para>The system shall present the User with a list of available keyboard layouts.</para>
                </formalpara>
                <formalpara id="UI.Input.ChooseLayout">
                    <title>UI.Input.ChooseLayout</title>
                    <para>When the User selects a keyboard layout, the system shall load the keyboard layout and apply it.</para>
                </formalpara>
                <formalpara id="UI.Input.Test">
                    <title>UI.Input.Test</title>
                    <para>The system shall present an input box for the User to test their selected keyboard layout.</para>
                </formalpara>
            </section>
            <section id="ui_input_key">
                <title>HorizonScript Keys</title>
                <formalpara id="Script.Key.keymap">
                    <title>Script.Key.keymap</title>
                    <para><varname>keymap</varname> &mdash; The identifier of the chosen keyboard layout.</para>
                </formalpara>
            </section>
        </section>
        <section id="ui_partition">
            <title>Disk Partitioning Setup</title>
            <section id="ui_partition_meta">
                <title>Description / Priority</title>
                <para/>
            </section>
            <section id="ui_partition_req">
                <title>Functional Requirements</title>
                <formalpara>
                    <title/>
                    <para/>
                </formalpara>
            </section>
        </section>
        <section id="ui_firmware">
            <title>Firmware Setup</title>
            <section id="ui_firmware_meta">
                <title>Description / Priority</title>
                <para>A User may possess hardware that requires non-free binary firmware to operate.  This screen will allow users the choice on whether to load such firmware or not.  Note that this feature can be compiled out of Horizon UI, and can also be disabled at run-time with a configuration setting.</para>
            </section>
            <section id="ui_firmware_pre">
                <title>Prerequisites</title>
                <formalpara id="UI.Firmware.Prerequisites">
                    <title>UI.Firmware.Prerequisites</title>
                    <para>The system must have firmware support compiled in.</para>
                </formalpara>
            </section>
            <section id="ui_firmware_req">
                <title>Functional Requirements</title>
                <formalpara id="UI.Firmware.Prompt">
                    <title>UI.Firmware.Prompt</title>
                    <para>The system shall ask the User whether or not to load binary firmware, stressing that security-sensitive systems must not choose this option.</para>
                </formalpara>
                <formalpara id="UI.Firmware.Load">
                    <title>UI.Firmware.Load</title>
                    <para>If the User chooses to load binary firmware, the system shall add the APK Fission repository and the linux-firwmare package to the installed environment.</para>
                </formalpara>
            </section>
            <section id="ui_firmware_key">
                <title>HorizonScript Keys</title>
                <formalpara id="Script.Key.firmware">
                    <title>Script.Key.firmware</title>
                    <para><varname>firmware</varname> &mdash; Whether to load firmware.</para>
                </formalpara>
            </section>
        </section>
        <section id="ui_network">
            <title>Networking Setup</title>
            <section id="ui_network_meta">
                <title>Description / Priority</title>
                <para>Most Users will want to configure a network connection on their computer.  The system will allow the user to configure their wired or wireless network connection, including authentication information (wireless), IP v4 and v6 addressing, routing, and DNS.</para>
            </section>
            <section id="ui_network_pre">
                <title>Prerequisites</title>
                <formalpara id="UI.Network.Prerequisites">
                    <title>UI.Network.Prerequisites</title>
                    <para>The system must have at least one non-loopback network interface detected by the kernel.</para>
                </formalpara>
            </section>
            <section id="ui_network_req">
                <title>Functional Requirements</title>
                <formalpara>
                    <title/>
                    <para/>
                </formalpara>
            </section>
        </section>
        <section id="ui_sysmeta">
            <title>System Metadata Setup</title>
            <section id="ui_sysmeta_meta">
                <title>Description / Priority</title>
                <para>A User needs to specify the timezone the computer will be running in, and the computer's name.  The computer's name is used even on non-networked computers, for shell prompts and login screens.  The system will also allow the user to ensure the current date and time are accurate.</para>
            </section>
            <section id="ui_sysmeta_req">
                <title>Functional Requirements</title>
                <formalpara id="UI.SysMeta.DateTime">
                    <title>UI.SysMeta.DateTime</title>
                    <para>The system shall display the date and time currently stored in the RTC (Real Time Clock), and allow the user to update the date and time stored in the RTC.</para>
                </formalpara>
                <formalpara id="UI.SysMeta.Timezone">
                    <title>UI.SysMeta.Timezone</title>
                    <para>The system shall allow the user to choose the time zone to use for time display.</para>
                </formalpara>
                <formalpara id="UI.SysMeta.DefaultTimezone">
                    <title>UI.SysMeta.DefaultTimezone</title>
                    <para>The system shall use UTC as the default time zone.</para>
                </formalpara>
                <formalpara id="UI.SysMeta.Hostname">
                    <title>UI.SysMeta.Hostname</title>
                    <para>The system shall allow the user to input the host name of the computer.</para>
                </formalpara>
                <formalpara id="UI.SysMeta.DefaultHostname">
                    <title>UI.SysMeta.DefaultHostname</title>
                    <para>The system shall provide a default host name for the user, calculated using the following rules:
                        <orderedlist id="UI.SysMeta.DefaultHostname.Formula">
                            <listitem><para>If the system is running in a non-installation environment, use "Adelie" and end calculation.</para></listitem>
                            <listitem><para>If the system has a manufacturer available via DMI or similar API, use that name truncated to 11 characters.  Otherwise, use "Adelie".</para></listitem>
                            <listitem><para>If the system has a network adaptor installed, even if it is not configured for use, use the last six characters of the MAC address from the first network adaptor.  Otherwise, use a random fruit name.</para></listitem>
                        </orderedlist>
                    </para>
                </formalpara>
                <formalpara id="UI.SysMeta.VerifyHostname">
                    <title>UI.SysMeta.VerifyHostname</title>
                    <para>The system shall ensure that the host name input by the user uses only valid characters for DNS names, and not accept characters that are invalid.</para>
                </formalpara>
                <formalpara id="UI.SysMeta.Enable">
                    <title>UI.SysMeta.Enable</title>
                    <para>The system shall enable the Next button when the host name field contains a valid name, and disable the Next button when it is empty.</para>
                </formalpara>
            </section>
            <section id="ui_sysmeta_key">
                <title>HorizonScript Keys</title>
                <formalpara id="Script.Key.timezone">
                    <title>Script.Key.timezone</title>
                    <para><varname>timezone</varname> &mdash; The zoneinfo name of the system's timezone.  Ex: Africa/Nairobi.</para>
                </formalpara>
                <formalpara id="Script.Key.hostname">
                    <title>Script.Key.hostname</title>
                    <para><varname>hostname</varname> &mdash; The name of the system.</para>
                </formalpara>
            </section>
        </section>
        <section id="ui_packages">
            <title>Package and Package Set Selection</title>
            <section id="ui_packages_meta">
                <title>Description / Priority</title>
                <para>The system will let the user choose what packages and sets of packages to install on their computer.</para>
            </section>
            <section id="ui_packages_req">
                <title>Functional Requirements</title>
                <formalpara id="UI.Packages.SimpleSel">
                    <title>UI.Packages.SimpleSel</title>
                    <para>The system shall allow the user to choose from one of three preset package sets, or to customise the packages installed.</para>
                </formalpara>
                <formalpara id="UI.Packages.SimpleSel.Standard">
                    <title>UI.Packages.SimpleSel.Standard</title>
                    <para>The system shall allow the user to choose the Standard preset, which uses <literal>adelie-base-posix</literal> as an anchor package, and includes the <literal>firefox-esr</literal>, <literal>libreoffice</literal>, and <literal>thunderbird</literal> packages, and the <literal>kde</literal> and <literal>x11</literal> metapackages.</para>
                </formalpara>
                <formalpara id="UI.Packages.SimpleSel.Notebook">
                    <title>UI.Packages.SimpleSel.Notebook</title>
                    <para>The system shall allow the user to choose the Notebook preset, which includes the Standard preset and additional power management tools (UPower, pm-utils).</para>
                </formalpara>
                <formalpara id="UI.Packages.SimpleSel.Minimal">
                    <title>UI.Packages.SimpleSel.Minimal</title>
                    <para>The system shall allow the user to choose the Minimal preset, which uses <literal>adelie-base</literal> as an anchor package, and includes <literal>lxqt-desktop</literal>, <literal>featherpad</literal>, <literal>netsurf</literal>, <literal>xorg-apps</literal>, <literal>xorg-drivers</literal>, and <literal>xorg-server</literal> packages.</para>
                </formalpara>
                <formalpara id="UI.Packages.SimpleSel.Custom">
                    <title>UI.Packages.SimpleSel.Custom</title>
                    <para>The system shall allow the user to choose to customise the packages installed on their computer.</para>
                </formalpara>
            </section>
        </section>
        <section id="ui_boot">
            <title>Boot Setup</title>
            <section id="ui_boot_meta">
                <title>Description / Priority</title>
                <para/>
            </section>
            <section id="ui_boot_req">
                <title>Functional Requirements</title>
                <formalpara>
                    <title/>
                    <para/>
                </formalpara>
            </section>
        </section>
        <section id="ui_accounts">
            <title>System Accounts Setup</title>
            <section id="ui_accounts_meta">
                <title>Description / Priority</title>
                <para/>
            </section>
            <section id="ui_accounts_req">
                <title>Functional Requirements</title>
                <formalpara>
                    <title/>
                    <para/>
                </formalpara>
            </section>
        </section>
        <section id="ui_writeout">
            <title>Save HorizonScript</title>
            <section id="ui_writeout_meta">
                <title>Description / Priority</title>
                <para/>
            </section>
            <section id="ui_writeout_req">
                <title>Functional Requirements</title>
                <formalpara>
                    <title/>
                    <para/>
                </formalpara>
            </section>
        </section>
        <section id="ui_commit">
            <title>Begin Installation</title>
            <section id="ui_commit_meta">
                <title>Description / Priority</title>
                <para/>
            </section>
            <section id="ui_commit_req">
                <title>Functional Requirements</title>
                <formalpara>
                    <title/>
                    <para/>
                </formalpara>
            </section>
        </section>
        <section id="ui_perform">
            <title>Perform Installation</title>
            <section id="ui_perform_meta">
                <title>Description / Priority</title>
                <para/>
            </section>
            <section id="ui_perform_req">
                <title>Functional Requirements</title>
                <formalpara>
                    <title/>
                    <para/>
                </formalpara>
            </section>
        </section>
        <section id="ui_finish">
            <title>Installation Completion</title>
            <section id="ui_finish_meta">
                <title>Description / Priority</title>
                <para/>
            </section>
            <section id="ui_finish_req">
                <title>Functional Requirements</title>
                <formalpara>
                    <title/>
                    <para/>
                </formalpara>
            </section>
        </section>
    </section>
    <section id="runner">
        <title>Horizon Runner</title>
        <para>The Horizon Runner is the component of Project Horizon that configures a computer to match an input HorizonScript.</para>
        <section id="runner_locate">
            <title>Locate HorizonScript</title>
            <section id="runner_locate_meta">
                <title>Description / Priority</title>
                <para/>
            </section>
            <section id="runner_locate_req">
                <title>Functional Requirements</title>
                <formalpara>
                    <title/>
                    <para/>
                </formalpara>
            </section>
        </section>
        <section id="runner_net">
            <title>Network Configuration</title>
            <section id="runner_net_meta">
                <title>Description / Priority</title>
                <para/>
            </section>
            <section id="runner_net_req">
                <title>Functional Requirements</title>
                <formalpara>
                    <title/>
                    <para/>
                </formalpara>
            </section>
        </section>
        <section id="runner_execute">
            <title>Execute HorizonScript</title>
            <section id="runner_execute_meta">
                <title>Description / Priority</title>
                <para/>
            </section>
            <section id="runner_execute_req">
                <title>Functional Requirements</title>
                <formalpara>
                    <title/>
                    <para/>
                </formalpara>
            </section>
        </section>
    </section>
</chapter>
